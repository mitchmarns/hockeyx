<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fictional Hockey League with Players</title>
    <style>
        /* Basic Reset */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #003366;
        }

        /* Layout Containers */
        .container {
            width: 90%;
            margin: 0 auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .schedule-header, .standings-header, .players-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .btn-simulate {
            padding: 10px 20px;
            background-color: #003366;
            color: white;
            border: none;
            cursor: pointer;
            border-radius: 5px;
            font-size: 16px;
        }

        .btn-simulate:hover {
            background-color: #00509e;
        }

        .btn-simulate:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }

        th {
            background-color: #003366;
            color: white;
        }

        td {
            background-color: #fff;
        }

        .team-logo {
            width: 30px;
            height: 30px;
            margin-right: 10px;
        }

        .result-win {
            color: green;
        }

        .result-loss {
            color: red;
        }

        .result-overtime {
            color: orange;
        }

        .scrollable-table {
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Fictional Hockey League with Players</h1>

    <!-- Game Simulation Section -->
    <div class="schedule-header">
        <h2>Season Schedule & Results</h2>
        <button class="btn-simulate" id="simulate-button" onclick="simulateNextGame()">Simulate Next Game</button>
    </div>

    <!-- Schedule Table -->
    <div class="scrollable-table">
        <table id="schedule-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Team 1</th>
                    <th>Score</th>
                    <th>Team 2</th>
                    <th>Score</th>
                    <th>Result</th>
                </tr>
            </thead>
            <tbody id="schedule-body">
                <!-- Game rows will be dynamically added -->
            </tbody>
        </table>
    </div>

    <!-- Standings Section -->
    <div class="standings-header">
        <h2>League Standings</h2>
    </div>

    <!-- Standings Table -->
    <div class="scrollable-table">
        <table id="standings-table">
            <thead>
                <tr>
                    <th>Team</th>
                    <th>W</th>
                    <th>L</th>
                    <th>T</th>
                    <th>Points</th>
                </tr>
            </thead>
            <tbody id="standings-body">
                <!-- Standings rows will be dynamically added -->
            </tbody>
        </table>
    </div>

    <!-- Players Section -->
    <div class="players-header">
        <h2>Player Stats</h2>
    </div>

    <!-- Player Stats Table -->
    <div class="scrollable-table">
        <table class="player-stats-table">
            <thead>
                <tr>
                    <th>Team</th>
                    <th>Player</th>
                    <th>Goals</th>
                    <th>Assists</th>
                    <th>Games Played</th>
                </tr>
            </thead>
            <tbody id="players-body">
                <!-- Player stats rows will be dynamically added -->
            </tbody>
        </table>
    </div>
</div>

<script>
// Define the teams and their players
const teams = [
    { 
        name: "Ice Wolves", 
        logo: "https://via.placeholder.com/30?text=IW", 
        wins: 0, 
        losses: 0, 
        ties: 0, 
        points: 0,
        players: [
            { name: "Alex Hunter", position: "Forward", goals: 0, assists: 0, games: 0 },
            { name: "Ben Steele", position: "Defense", goals: 0, assists: 0, games: 0 },
            { name: "Chris Frost", position: "Goalie", goals: 0, assists: 0, games: 0 }
        ]
    },
    { 
        name: "Thunderbirds", 
        logo: "https://via.placeholder.com/30?text=TB", 
        wins: 0, 
        losses: 0, 
        ties: 0, 
        points: 0,
        players: [
            { name: "Sam King", position: "Forward", goals: 0, assists: 0, games: 0 },
            { name: "Jack Reeve", position: "Defense", goals: 0, assists: 0, games: 0 },
            { name: "Zane Thunder", position: "Goalie", goals: 0, assists: 0, games: 0 }
        ]
    },
    { 
        name: "Blizzard", 
        logo: "https://via.placeholder.com/30?text=BZ", 
        wins: 0, 
        losses: 0, 
        ties: 0, 
        points: 0,
        players: [
            { name: "Markus North", position: "Forward", goals: 0, assists: 0, games: 0 },
            { name: "Dylan White", position: "Defense", goals: 0, assists: 0, games: 0 },
            { name: "Parker Gale", position: "Goalie", goals: 0, assists: 0, games: 0 }
        ]
    },
    { 
        name: "Raging Bulls", 
        logo: "https://via.placeholder.com/30?text=RB", 
        wins: 0, 
        losses: 0, 
        ties: 0, 
        points: 0,
        players: [
            { name: "Liam Forge", position: "Forward", goals: 0, assists: 0, games: 0 },
            { name: "Tyler Burns", position: "Defense", goals: 0, assists: 0, games: 0 },
            { name: "Eli Grant", position: "Goalie", goals: 0, assists: 0, games: 0 }
        ]
    }
];

// Generate a full schedule with 82 games per team
const totalGamesPerTeam = 82;
let schedule = [];

// Create a basic round-robin schedule
function generateSchedule() {
    for (let teamIndex = 0; teamIndex < teams.length; teamIndex++) {
        let team = teams[teamIndex];
        let gamesPlayed = 0;
        
        // Play games against other teams until reaching the total games
        while (gamesPlayed < totalGamesPerTeam) {
            for (let opponentIndex = 0; opponentIndex < teams.length; opponentIndex++) {
                if (teamIndex !== opponentIndex && gamesPlayed < totalGamesPerTeam) {
                    const opponent = teams[opponentIndex];
                    const date = new Date();
                    date.setDate(date.getDate() + schedule.length);  // Schedule games on consecutive days
                    
                    schedule.push({
                        date: date.toDateString(),
                        team1: team,
                        team2: opponent,
                        score1: null,
                        score2: null,
                        result: null
                    });

                    gamesPlayed++;
                }
            }
        }
    }
}

// Simulate the game and update player stats
function simulateGame(game) {
    let score1 = getRandomScore();
    let score2 = getRandomScore();

    // If scores are tied, add overtime
    while (score1 === score2) {
        // Simulate overtime: give a bonus goal randomly to break the tie
        score1 = getRandomScore();
        score2 = getRandomScore();
    }

    game.score1 = score1;
    game.score2 = score2;

    // Update game stats
    if (score1 > score2) {
        game.result = `${game.team1.name} wins!`;
        game.team1.wins += 1;
        game.team2.losses += 1;
        game.team1.points += 2;
    } else {
        game.result = `${game.team2.name} wins!`;
        game.team2.wins += 1;
        game.team1.losses += 1;
        game.team2.points += 2;
    }

    // Update player stats with randomly assigned goals and assists
    game.team1.players.forEach(player => {
        const goals = Math.floor(Math.random() * score1); // Random goals between 0 and score1
        const assists = Math.floor(Math.random() * goals); // Random assists
        player.goals += goals;
        player.assists += assists;
        player.games += 1;
    });

    game.team2.players.forEach(player => {
        const goals = Math.floor(Math.random() * score2); // Random goals between 0 and score2
        const assists = Math.floor(Math.random() * goals); // Random assists
        player.goals += goals;
        player.assists += assists;
        player.games += 1;
    });
}

// Random score generator
function getRandomScore() {
    return Math.floor(Math.random() * 6) + 1; // Score range between 1 and 6
}

// Update the schedule table
function updateScheduleTable() {
    const scheduleBody = document.getElementById('schedule-body');
    scheduleBody.innerHTML = '';

    schedule.forEach(game => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${game.date}</td>
            <td><img class="team-logo" src="${game.team1.logo}" alt="${game.team1.name}">${game.team1.name}</td>
            <td>${game.score1}</td>
            <td><img class="team-logo" src="${game.team2.logo}" alt="${game.team2.name}">${game.team2.name}</td>
            <td>${game.score2}</td>
            <td class="${game.result.includes('win') ? 'result-win' : 'result-loss'}">${game.result}</td>
        `;
        scheduleBody.appendChild(row);
    });
}

// Update the standings table
function updateStandingsTable() {
    const standingsBody = document.getElementById('standings-body');
    standingsBody.innerHTML = '';

    // Sort teams by points
    const sortedTeams = [...teams].sort((a, b) => b.points - a.points);

    sortedTeams.forEach(team => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${team.name}</td>
            <td>${team.wins}</td>
            <td>${team.losses}</td>
            <td>${team.ties}</td>
            <td>${team.points}</td>
        `;
        standingsBody.appendChild(row);
    });
}

// Update the player stats table
function updatePlayerStatsTable() {
    const playersBody = document.getElementById('players-body');
    playersBody.innerHTML = '';

    teams.forEach(team => {
        team.players.forEach(player => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${team.name}</td>
                <td>${player.name}</td>
                <td>${player.goals}</td>
                <td>${player.assists}</td>
                <td>${player.games}</td>
            `;
            playersBody.appendChild(row);
        });
    });
}

// Track the index of the next game to simulate
let currentGameIndex = 0;

// Simulate the next game
function simulateNextGame() {
    if (currentGameIndex >= schedule.length) {
        alert("All games have been simulated.");
        document.getElementById('simulate-button').disabled = true;
        return;
    }

    const game = schedule[currentGameIndex];
    simulateGame(game);
    updateScheduleTable();
    updateStandingsTable();
    updatePlayerStatsTable();

    // Move to the next game
    currentGameIndex++;
}

// Generate the schedule when the page loads
generateSchedule();
updateScheduleTable();
updateStandingsTable();
updatePlayerStatsTable();
</script>

</body>
</html>
